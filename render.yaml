services:
  - type: web
    name: book-physical-ai-backend
    runtime: python
    plan: free
    branch: backend
    buildCommand: pip install uv && uv sync
    startCommand: uv run python -m backend.src.api.main
    healthCheckPath: /health
    envVars:
      - key: GEMINI_API_KEY
        value: AIzaSyDgmhw5VUWVQFlSuqOSrvK8j6cz1FhqapA
      - key: GEMINI_EMBEDDING_MODEL
        value: models/text-embedding-004
      - key: GEMINI_LLM_MODEL
        value: gemini-1.5-flash
      - key: GEMINI_TEMPERATURE
        value: 0.3
      - key: QDRANT_URL
        value: https://a44bcc35-e2f6-44f0-8a9c-82bb1d13e8f6.us-east4-0.gcp.cloud.qdrant.io
      - key: QDRANT_API_KEY
        value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiJtIn0.b4PSGhupOADwbfNZObErXy0s_hfh9uCiDImu7Y2VpjU
      - key: QDRANT_COLLECTION_NAME
        value: Hackhaton1
      - key: QDRANT_VECTOR_SIZE
        value: 768
      - key: DATABASE_URL
        value: postgresql://neondb_owner:npg_r8MH4dVSPpgJ@ep-patient-tree-adr5pn76-pooler.c-2.us-east-1.aws.neon.tech/neondb?sslmode=require
      - key: DATABASE_POOL_MIN_SIZE
        value: 2
      - key: DATABASE_POOL_MAX_SIZE
        value: 10
      - key: API_HOST
        value: 0.0.0.0
      - key: API_PORT
        value: 10000
      - key: API_RELOAD
        value: false
      - key: API_CORS_ORIGINS
        value: '["https://hamzaacca.github.io"]'
      - key: ADMIN_API_KEY
        value: hackathon-admin-key-2024
      - key: LOG_LEVEL
        value: INFO
